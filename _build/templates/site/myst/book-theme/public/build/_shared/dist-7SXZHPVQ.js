import{b as H,c as x,e as $,l as B,n as D}from"/myst_assets_folder/_shared/chunk-MJFQO7Q4.js";import"/myst_assets_folder/_shared/chunk-RTIGS2T3.js";import"/myst_assets_folder/_shared/chunk-RAQ24GF6.js";function S(r){return r===1?"p{\\dimexpr \\linewidth-2\\tabcolsep}":`p{\\dimexpr ${r.toFixed(3)}\\linewidth-2\\tabcolsep}`}function _(r){var e,i,n;let l=[],t=0;for(let c=0;c<r.children.length;c+=1){let p=r.children[c].children.reduce((m,g)=>{var b,E;let Y=new Array((b=g.colspan)!==null&&b!==void 0?b:1).fill(g.width?g.width/((E=g.colspan)!==null&&E!==void 0?E:1):null);return[...m,...Y]},[]),w=p.filter(m=>m>0).length;if((c===0||w>=t)&&(t=w,l=p,t===p.length))break}let o;if(t===l.length)o=l;else{let h=886-l.reduce((m,g)=>g==null?m:m+g,0),p=l.length-t,w=Math.floor(h/p);o=l.map(m=>m==null||m===0?w:m)}let a=o.reduce((c,h)=>c+h,0),u=o.map(c=>c/a),d=u.map(c=>S(c)).join(""),s=o.length>0?o.length:(n=(i=(e=r?.children[0])===null||e===void 0?void 0:e.children)===null||i===void 0?void 0:i.length)!==null&&n!==void 0?n:0;return{widths:u,columnSpec:d,numColumns:s}}function k(r,e,i,n,l,t){var o;let a=1,u=(o=e.colspan)!==null&&o!==void 0?o:1;if(u>1){let d=0;for(let s=0;s<u;s+=1)d+=l[n+s];r.write(`\\multicolumn{${u}}{${S(d)}}{`),a=u}return e.children.length===1&&e.children[0].type==="paragraph"?r.renderChildren(e.children[0],!0):r.renderChildren(e,!0),u>1&&r.write("}"),i<t-1&&r.write(" & "),a}function W(r,e){e.usePackages("booktabs");let{widths:i,columnSpec:n,numColumns:l}=_(r);if(!l)throw new Error("invalid table format, no columns");e.data.isInTable=!0,e.ensureNewLine();let t=0;if(e.data.longFigure){e.ensureNewLine(),e.write("\\hline"),e.ensureNewLine();let o=!1;r.children.forEach(({children:a})=>{var u,d;if(!o){if(!((u=a[0])===null||u===void 0)&&u.header){t+=1;let s=0;a.forEach((c,h)=>{s+=k(e,c,h,s,i,a.length)}),e.write(" \\\\"),e.ensureNewLine()}!((d=a[0])===null||d===void 0)&&d.header||(o=!0)}}),t>0&&(e.ensureNewLine(),e.write("\\hline"),e.ensureNewLine(),e.write("\\endfirsthead"),e.ensureNewLine(),e.write("\\hline"),e.ensureNewLine(),e.write(`\\multicolumn{${l}}{c}{\\tablename\\ \\thetable\\ -- \\textit{Continued from previous page}}\\\\`),e.ensureNewLine(),r.children.forEach(({children:a},u)=>{if(u>=t)return;let d=0;a.forEach((s,c)=>{d+=k(e,s,c,d,i,a.length)}),e.write(" \\\\"),e.ensureNewLine()}),e.ensureNewLine(),e.write("\\hline"),e.ensureNewLine(),e.write("\\endhead"),e.ensureNewLine())}else e.write(`\\begin{tabular}{${n}}`),e.ensureNewLine(),e.write("\\toprule"),e.ensureNewLine();r.children.forEach(({children:o},a)=>{var u;if(a<t)return;let d=0;o.forEach((s,c)=>{d+=k(e,s,c,d,i,o.length)}),e.write(" \\\\"),e.ensureNewLine(),!((u=o[0])===null||u===void 0)&&u.header&&(e.write("\\hline"),e.ensureNewLine())}),e.data.longFigure?e.write("\\hline"):(e.write("\\bottomrule"),e.ensureNewLine(),e.write("\\end{tabular}")),e.closeBlock(r),e.data.isInTable=!1}var f;(function(r){r.fig="fig",r.eq="eq",r.code="code",r.table="table"})(f||(f={}));function ee(r){switch(r.type){case"iframe":case"image":return f.fig;case"table":return f.table;case"code":return f.code;case"math":return f.eq;default:return null}}function T(r){var e;let i=ee(r);return(e=r.children)===null||e===void 0||e.forEach(n=>{i||(i=T(n))}),i}function re(r){switch(T(r)){case f.fig:return r.fullpage?"figure*":"figure";case f.table:return r.fullpage?"table*":"table";case f.code:return"code";case f.eq:return"figure";default:return"figure"}}function ne(r){switch(T(r)){case f.fig:case f.table:return"!htbp";case f.code:return"H";case f.eq:default:return}}var F=(r,e)=>{var i;if(e.data.isInTable){e.renderChildren(r);return}let n=H("table",r),l=!!n,t;n&&r.multipage&&(t=_(n));let o,a;r.landscape&&(e.usePackages("pdflscape"),o="\\begin{landscape}",a="\\end{landscape}");let{enumerated:u,label:d,identifier:s,multipage:c}=r,h=(i=d??s)!==null&&i!==void 0?i:void 0,p=l&&c?"longtable":re(r);p==="longtable"&&e.usePackages("longtable");let w=l&&t?t.columnSpec:void 0,m=l?void 0:ne(r);o&&e.write(o);let g=w?`{${w}}`:"",b=m?`[${m}]`:"";e.write(`\\begin{${p}}${g}${b}
`),(!c||!l)&&e.write("\\centering"),e.ensureNewLine(),e.data.longFigure=c,e.data.nextCaptionNumbered=u??!!h,e.data.nextCaptionId=h,e.renderChildren(r),e.trimEnd(),e.data.longFigure=void 0,e.write(`
\\end{${p}}`),a&&e.write(a),e.closeBlock(r)},R=(r,e)=>{if(e.data.isInTable&&r.type!==f.table)return null;e.ensureNewLine(!0);let{nextCaptionNumbered:i,nextCaptionId:n}=e.data,l=i===!1?"caption[]*":"caption[]",t=i&&n?`\\label{${n}}`:"";e.renderInlineEnvironment(r,l,{after:t})};function U(r,e=" "){return r.replace(/\u00A0/g,e).replace(/[\u200B-\u200D\uFEFF]/g,"")}var O="\u{1F4A5}\u{1F3AF}BACKSLASHSPACE\u{1F3AF}\u{1F4A5}",j="\u{1F4A5}\u{1F3AF}BACKSLASH\u{1F3AF}\u{1F4A5}",q="\u{1F4A5}\u{1F3AF}TILDE\u{1F3AF}\u{1F4A5}",I={"&":"\\&","%":"\\%",$:"\\$","#":"\\#",_:"\\_","{":"\\{","}":"\\}","^":"\\^"},te={...I,"\u2019":"'","\u2018":"`","\u201D":"''","\u201C":"``","\xBB":">>","\xAB":"<<","\u2026":"\\dots","\u2013":"--","\u2014":"---","\xA9":"\\textcopyright ","\xAE":"\\textregistered ","\u2122":"\\texttrademark ","<":"\\textless ",">":"\\textgreater ","\xA0":"~","\u202F":"~","\u2009":"\\,"},G={"\u2194":"\\leftrightarrow","\u21D4":"\\Leftrightarrow","\u2192":"\\rightarrow","\u21D2":"\\Rightarrow","\u2190":"\\leftarrow","\u21D0":"\\Leftarrow"},X={"\u2212":"-","-":"-","\uFE63":"-","\uFF0D":"-","\uFF0B":"+"},M={...te,...G,...X},L={...G,...X,"\xBD":"\\frac{1}{2}","\u2153":"\\frac{1}{3}","\u2154":"\\frac{2}{3}","\xBC":"\\frac{1}{4}","\u2155":"\\frac{1}{5}","\u2156":"\\frac{2}{5}","\u2157":"\\frac{3}{5}","\u2158":"\\frac{4}{5}","\u2159":"\\frac{1}{6}","\u215A":"\\frac{5}{6}","\u2150":"\\frac{1}{7}","\u215B":"\\frac{1}{8}","\u215C":"\\frac{3}{8}","\u215D":"\\frac{5}{8}","\u215E":"\\frac{7}{8}","\u2151":"\\frac{1}{9}","\u2152":"\\frac{1}{10}","\xB1":"\\pm","\xD7":"\\times",\u0391:"A",\u03B1:"\\alpha",\u0392:"B",\u03B2:"\\beta",\u00DF:"\\beta",\u0393:"\\Gamma",\u03B3:"\\gamma",\u0394:"\\Delta","\u2206":"\\Delta",\u03B4:"\\delta",\u0395:"E",\u03B5:"\\epsilon",\u0396:"Z",\u03B6:"\\zeta",\u0397:"H",\u03B7:"\\eta",\u0398:"\\Theta",\u03B8:"\\theta",\u03D1:"\\vartheta",\u0399:"I",\u03B9:"\\iota",\u039A:"K",\u03BA:"\\kappa",\u039B:"\\Lambda",\u03BB:"\\lambda",\u039C:"M",\u03BC:"\\mu",\u039D:"N",\u03BD:"\\nu",\u039E:"\\Xi",\u03BE:"\\xi",\u039F:"O",\u03BF:"o",\u03A0:"\\Pi",\u03C0:"\\pi",\u03A1:"P",\u03C1:"\\rho",\u03A3:"\\Sigma",\u03C3:"\\sigma",\u03A4:"T",\u03C4:"\\tau",\u03A5:"\\Upsilon",\u03C5:"\\upsilon",\u03A6:"\\Phi",\u03D5:"\\phi",\u03C6:"\\varphi",\u03A7:"X",\u03C7:"\\chi",\u03A8:"\\Psi",\u03C8:"\\psi",\u03A9:"\\Omega",\u03C9:"\\omega","\u2202":"\\partial","\u221E":"\\infty","\u2248":"\\approx","\u2260":"\\neq","\u2022":"\\cdot"};function N(r){return Array.from(r??"").map(n=>I[n]?{kind:"text",text:I[n]}:{kind:"text",text:n}).reduce((n,l)=>{let t=n.slice(-1)[0];return t?.kind===l.kind?t.text+=l.text:n.push(l),n},[]).reduce((n,l)=>n+l.text,"")}function K(r){let e=(r??"").replace(/\\ /g,O).replace(/\\/g,j).replace(/~/g,q),l=Array.from(e).map(t=>M[t]?{kind:"text",text:M[t]}:L[t]?{kind:"math",text:L[t]}:{kind:"text",text:t}).reduce((t,o)=>{let a=t.slice(-1)[0];return a?.kind===o.kind?a.text+=o.text:t.push(o),t},[]).reduce((t,o)=>o.kind==="math"?`${t}$${o.text}$`:t+o.text,"").replace(new RegExp(O,"g"),"{\\textbackslash}~").replace(new RegExp(j,"g"),"{\\textbackslash}").replace(new RegExp(q,"g"),"{\\textasciitilde}");return U(l,"~")}function z(r){let i=Array.from(r??"").reduce((n,l)=>{if(L[l]){let t=n.slice(-1)===" "?"":" ";return`${n}${t}${L[l]}`}return n+l},"").trim();return U(i)}function v(r){if(typeof r=="number"&&Number.isNaN(r))return v(.7);if(typeof r=="string")return r.endsWith("%")?v(Number(r.replace("%",""))):r.endsWith("px")?v(Number(r.replace("px",""))/800):(console.log(`Unknown width ${r} in getLatexImageWidth`),v(.7));let e=r??.7;return e<1&&(e*=100),`${e/100}\\linewidth`}function y(r){var e;let i=(e=r?.split(" ").map(n=>n.trim().toLowerCase()).filter(n=>!!n))!==null&&e!==void 0?e:[];return Array.from(new Set(i))}function Z(r,e){e.options.math&&Object.entries(e.options.math).forEach(([i,n])=>{r.includes(i)&&(e.data.mathPlugins[i]=n)})}function A(r,e=r.data.mathPlugins){if(!r.options.math)return e;let i=Object.entries(e),n={};Object.entries(r.options.math).forEach(([t,o])=>{e[t]||i.forEach(([,a])=>{a.includes(t)&&(n[t]=o)})});let l={...n,...e};return Object.keys(n).length===0?l:A(r,l)}var le=(r,e)=>{let{label:i,enumerated:n}=r;e.usePackages("amsmath"),Z(r.value,e),e.data.isInTable?(e.write("\\(\\displaystyle "),e.write(r.value),e.write(" \\)")):(e.write(`\\begin{equation${n===!1?"*":""}}
`),i&&e.write(`\\label{${i}}`),e.ensureNewLine(),e.write(r.value),e.ensureNewLine(!0),e.write(`\\end{equation${n===!1?"*":""}}`)),e.data.isInTable||e.closeBlock(r)},oe=(r,e)=>{e.usePackages("amsmath"),Z(r.value,e),e.write("$"),e.text(r.value,!0),e.write("$")},ae={math:le,inlineMath:oe},J=ae;function Q(r){x("container",r).forEach(i=>{var n;let l=(n=i.children)===null||n===void 0?void 0:n.filter(t=>t.type==="caption"||t.type==="legend");l?.length&&(l[0].type="caption",l.slice(1).forEach(t=>{var o;l[0].children&&t.children&&((o=l[0].children)===null||o===void 0||o.push(...t.children)),t.type="__delete__"}))}),D(r,"__delete__")}var V={text(r,e){e.text(r.value)},paragraph(r,e){e.renderChildren(r)},heading(r,e){let{depth:i,label:n,enumerated:l}=r;if(e.data.nextHeadingIsFrameTitle)e.write("\\frametitle{"),e.data.nextHeadingIsFrameTitle=!1;else{let t=l!==!1||e.options.beamer?"":"*";i===1&&e.write(`\\section${t}{`),i===2&&e.write(`\\subsection${t}{`),i===3&&e.write(`\\subsubsection${t}{`),i===4&&e.write(`\\paragraph${t}{`),i===5&&e.write(`\\subparagraph${t}{`),i===6&&e.write(`\\subparagraph${t}{`)}e.renderChildren(r,!0),e.write("}"),l!==!1&&n&&e.write(`\\label{${n}}`),e.closeBlock(r)},block(r,e){var i,n,l;if(e.options.beamer){if(!((i=r.data)===null||i===void 0)&&i.outline){e.data.nextHeadingIsFrameTitle=!1,e.renderChildren(r,!1);return}((l=(n=r.children)===null||n===void 0?void 0:n[0])===null||l===void 0?void 0:l.type)==="heading"&&(e.data.nextHeadingIsFrameTitle=!0),e.write(`

\\begin{frame}
`),e.renderChildren(r,!1),e.write(`\\end{frame}

`);return}e.renderChildren(r,!1)},blockquote(r,e){e.renderEnvironment(r,"quote")},definitionList(r,e){e.write(`\\begin{description}
`),e.renderChildren(r,!0),e.ensureNewLine(),e.write("\\end{description}"),e.closeBlock(r)},definitionTerm(r,e){e.ensureNewLine(),e.write("\\item["),e.renderChildren(r,!0),e.write("] ")},definitionDescription(r,e){e.renderChildren(r,!0)},code(r,e){let i=`\\begin{verbatim}
`,n=`
\\end{verbatim}`;y(r.class).includes("listings")&&r.lang!==void 0?(e.usePackages("listings"),i=`\\begin{lstlisting}[language=${r.lang}]
`,n=`
\\end{lstlisting}`):y(r.class).includes("minted")&&r.lang!==void 0&&(e.usePackages("minted"),i=`\\begin{minted}{${r.lang}}
`,n=`
\\end{minted}`),e.write(i),e.text(r.value,!0),e.write(n),e.closeBlock(r)},list(r,e){e.data.isInTable?r.children.forEach((i,n)=>{e.write(r.ordered?`${n}.~~`:"\\textbullet~~"),e.renderChildren(i,!0),e.write("\\newline"),e.ensureNewLine()}):e.renderEnvironment(r,r.ordered?"enumerate":"itemize",{parameters:r.ordered&&r.start!==1?"resume":void 0})},listItem(r,e){e.write("\\item "),e.renderChildren(r,!0),e.write(`
`)},thematicBreak(r,e){e.write(`
\\bigskip
\\centerline{\\rule{13cm}{0.4pt}}
\\bigskip`),e.closeBlock(r)},...J,mystRole(r,e){e.renderChildren(r,!0)},mystDirective(r,e){e.renderChildren(r,!1)},comment(r,e){var i,n;e.ensureNewLine(),e.write(`% ${(n=(i=r.value)===null||i===void 0?void 0:i.split(`
`).join(`
% `))!==null&&n!==void 0?n:""}`),e.closeBlock(r)},strong(r,e){e.renderInlineEnvironment(r,"textbf")},emphasis(r,e){e.renderInlineEnvironment(r,"textit")},underline(r,e){e.renderInlineEnvironment(r,"uline")},inlineCode(r,e){e.write("\\texttt{"),e.text(r.value,!1),e.write("}")},subscript(r,e){e.renderInlineEnvironment(r,"textsubscript")},superscript(r,e){e.renderInlineEnvironment(r,"textsuperscript")},delete(r,e){e.usePackages("ulem"),e.renderInlineEnvironment(r,"sout")},break(r,e){e.write("\\newline"),e.ensureNewLine()},abbreviation(r,e){e.renderChildren(r,!0)},link(r,e){var i;e.usePackages("url","hyperref");let n=r.url;if(((i=r.children[0])===null||i===void 0?void 0:i.value)===n){e.write("\\url{"),e.write(N(n)),e.write("}");return}e.write("\\href{"),e.write(N(n)),e.write("}{"),e.renderChildren(r,!0),e.write("}")},admonition(r,e){e.usePackages("framed"),e.renderEnvironment(r,"framed")},admonitionTitle(r,e){e.renderInlineEnvironment(r,"textbf"),e.write(`\\\\
`)},table:W,image(r,e){e.usePackages("graphicx");let{width:i,url:n,align:l}=r,t=n,o=v(i);e.write(`\\includegraphics[width=${o}]{${t}}`),e.closeBlock(r)},container:F,caption:R,captionNumber:()=>{},crossReference(r,e){var i,n;let l=!((i=r.template)===null||i===void 0)&&i.includes("%s")?r.template:void 0,t=((n=l??B(r))===null||n===void 0?void 0:n.replace(/\s/g,"~"))||"%s",o=r.label;e.write(t.replace(/%s/g,`\\ref{${o}}`))},citeGroup(r,e){if(e.options.citestyle==="numerical-only")e.write("\\cite{");else if(e.options.bibliography==="biblatex"){let i=r.kind==="narrative"?"textcite":"parencite";e.write(`\\${i}{`)}else{let i=r.kind==="narrative"?"t":"p";e.write(`\\cite${i}{`)}e.renderChildren(r,!0,", "),e.write("}")},cite(r,e,i){e.options.bibliography||e.usePackages("natbib"),i.type==="citeGroup"?e.write(r.label):e.options.bibliography==="biblatex"?e.write(`\\textcite{${r.label}}`):e.write(`\\cite{${r.label}}`)},embed(r,e){e.renderChildren(r,!0)},include(r,e){e.renderChildren(r,!0)},footnoteReference(r,e){if(!r.identifier)return;let i=e.footnotes[r.identifier];if(!i){$(e.file,`Unknown footnote identifier "${r.identifier}"`,{node:r,source:"myst-to-tex"});return}e.write("\\footnote{"),e.renderChildren(i,!0),e.trimEnd(),e.write("}")},footnoteDefinition(){},si(r,e){var i,n,l,t;e.usePackages("siunitx"),r.number==null?e.write(`\\unit{${(n=(i=r.units)===null||i===void 0?void 0:i.map(o=>`\\${o}`).join(""))!==null&&n!==void 0?n:""}}`):e.write(`\\qty{${r.number}}{${(t=(l=r.units)===null||l===void 0?void 0:l.map(o=>`\\${o}`).join(""))!==null&&t!==void 0?t:""}}`)}},P=class{constructor(e,i,n){var l,t;e.result="",this.file=e,this.options=n??{},this.data={mathPlugins:{},imports:new Set},this.handlers=(l=n?.handlers)!==null&&l!==void 0?l:V,this.references=(t=n?.references)!==null&&t!==void 0?t:{},this.footnotes=Object.fromEntries(x("footnoteDefinition",i).map(o=>{let a=o;return[a.identifier,a]})),this.renderChildren(i)}get out(){return this.file.result}usePackages(...e){e.forEach(i=>{this.data.imports.add(i)})}write(e){this.file.result+=e}text(e,i=!1){let n=i?z(e):K(e);this.write(n)}trimEnd(){this.file.result=this.out.trimEnd()}ensureNewLine(e=!1){e&&this.trimEnd(),!this.out.endsWith(`
`)&&this.write(`
`)}renderChildren(e,i=!1,n=""){var l,t,o;let a=(t=(l=e.children)===null||l===void 0?void 0:l.length)!==null&&t!==void 0?t:0;(o=e.children)===null||o===void 0||o.forEach((u,d)=>{let s=this.handlers[u.type];s?s(u,this,e):$(this.file,`Unhandled LaTeX conversion for node of "${u.type}"`,{node:u,source:"myst-to-tex"}),n&&d+1<a&&this.write(n)}),i||this.closeBlock(e)}renderEnvironment(e,i,n){let l=n?.parameters?`[${n.parameters}]`:"",t=n?.arguments?`{${n.arguments.join("}{")}}`:"";this.file.result+=`\\begin{${i}}${l}${t}
`,this.renderChildren(e,!0),this.ensureNewLine(!0),this.file.result+=`\\end{${i}}`,this.closeBlock(e)}renderInlineEnvironment(e,i,n){this.file.result+=`\\${i}{`,this.renderChildren(e,!0),this.trimEnd(),this.file.result+="}",n?.after&&(this.ensureNewLine(!0),this.write(n.after))}closeBlock(e){this.ensureNewLine(!0),this.file.result+=`
`}},ue=function(r){return this.Compiler=(e,i)=>{Q(e);let n=new P(i,e,r??{handlers:V}),l=i.result.trim(),t={imports:[...n.data.imports],commands:A(n),value:l};return i.result=t,i},e=>e},Ce=ue;export{Ce as default};
